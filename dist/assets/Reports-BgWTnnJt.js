import{d as p,m as b,_ as y,h as m,o as l,c,a as e,n as C,l as a,t as i,b as g,w as T,v as A,e as h,s as x,T as k,p as w,i as D,f as F,x as R,M as O,k as j,F as V,r as H,q as L}from"./index-2IeyWMcP.js";import{C as q,u as v,N as P}from"./NavService-CA9-EOMK.js";const U={data(){return{resolution:null,resolutionText:"",cardType:"theft"}},components:{CaseButtons:q},props:{theftCase:{type:Object}},methods:{hideDetails(){this.$emit("hideDetails")},dateFormatter(t){return new Date(t).toLocaleString("ru")},officerName(){const t=this.officersStore.officers.find(n=>n._id===this.theftCase.officer);return t?`${t.firstName} ${t.lastName}`:"Unknown"},addResolution(){this.resolution=this.resolution?null:!0},closeReport(t,n,s){this.resolution&&(this.theftStore.editCase(t,n,s),this.resolution=null)}},computed:{theftStore(){return p()},officersStore(){return v()},...b(v,{officers:"officers"}),colorSetter(){switch(this.theftCase.status){case"new":return"var(--red)";case"in_progress":return"var(--yellow)";default:return"var(--green)"}}}},r=t=>(w("data-v-cd9852a5"),t=t(),D(),t),W={class:"theftCase__details__container"},z={class:"theftCase__details__container__content"},E={class:"theftCase__details__container__content__more__left"},X=r(()=>e("span",{class:"theftCase__details__container__content__more-info"},[a("Date of theft: "),e("br")],-1)),G=r(()=>e("span",{class:"theftCase__details__container__content__more-info"},[a("ownerFullName: "),e("br")],-1)),J=r(()=>e("span",{class:"theftCase__details__container__content__more-info"},[a("licenseNumber: "),e("br")],-1)),K=r(()=>e("span",{class:"theftCase__details__container__content__more-info"},[a("type: "),e("br")],-1)),Q=r(()=>e("span",{class:"theftCase__details__container__content__more-info"},[a("color: "),e("br")],-1)),Y={class:"theftCase__details__container__content__more__right"},Z=r(()=>e("span",{class:"theftCase__details__container__content__more-info"},[a("created at: "),e("br")],-1)),$={key:0},ee=r(()=>e("span",{class:"theftCase__details__container__content__more-info"},[a("updated at: "),e("br")],-1)),te=r(()=>e("span",{class:"theftCase__details__container__content__more-info"},[a("officer: "),e("br")],-1)),se={key:1},ae=r(()=>e("span",{class:"theftCase__details__container__content__more-info"},[a("resolution: "),e("br")],-1)),oe={key:2},ne=r(()=>e("span",{class:"theftCase__details__container__content__more-info"},[a("resolution: "),e("br")],-1)),ie={class:"theftCase__details__container__content__more__bottom"},re=r(()=>e("span",{class:"theftCase__details__container__content__more-info"},[a("description: "),e("br")],-1)),le={class:"theftCase__details__container__content__more-info description"};function _e(t,n,s,S,_,o){const f=m("CaseButtons");return l(),c("div",null,[e("div",W,[e("div",z,[e("div",{class:"theftCase__details__container__content__more",style:C({color:o.colorSetter})},[e("div",E,[e("ul",null,[e("li",null,[X,a(" "+i(o.dateFormatter(s.theftCase.date)),1)]),e("li",null,[G,a(" "+i(s.theftCase.ownerFullName),1)]),e("li",null,[J,a(" "+i(s.theftCase.licenseNumber),1)]),e("li",null,[K,a(" "+i(s.theftCase.type),1)]),e("li",null,[Q,a(" "+i(s.theftCase.color),1)])])]),e("div",Y,[e("ul",null,[e("li",null,[Z,a(" "+i(o.dateFormatter(s.theftCase.createdAt)),1)]),s.theftCase.updatedAt?(l(),c("li",$,[ee,a(" "+i(o.dateFormatter(s.theftCase.updatedAt)),1)])):g("",!0),e("li",null,[te,a(" "+i(o.officerName()),1)]),s.theftCase.resolution?(l(),c("li",se,[ae,a(" "+i(s.theftCase.resolution),1)])):g("",!0),this.resolution?(l(),c("li",oe,[ne,T(e("textarea",{name:"resolution",id:"resolution","onUpdate:modelValue":n[0]||(n[0]=d=>_.resolutionText=d),placeholder:"type something"},null,512),[[A,_.resolutionText]])])):g("",!0)])]),e("div",ie,[re,e("div",le,i(s.theftCase.description),1)])],4)]),h(k,null,{default:x(()=>[h(f,{resolutionText:_.resolutionText,theftCase:s.theftCase,cardType:_.cardType,onAddResolution:o.addResolution,onCloseReport:n[1]||(n[1]=d=>o.closeReport(2,s.theftCase._id,this.resolutionText))},null,8,["resolutionText","theftCase","cardType","onAddResolution"])]),_:1}),e("button",{class:"theftCase__details__container-hide",onClick:n[2]||(n[2]=(...d)=>o.hideDetails&&o.hideDetails(...d))}," x ")])])}const ce=y(U,[["render",_e],["__scopeId","data-v-cd9852a5"]]),de={components:{TheftCaseDetails:ce},props:{theftCase:{type:Object,required:!0},isActive:{type:Boolean,required:!0}},data(){return{position:null,marginBottom:"0"}},watch:{isActive(t){t?this.setMarginBottom("540px"):this.resetMarginBottomWithDelay()}},methods:{toggleDetails(){this.$emit("toggleDetails"),this.$nextTick(()=>{const n=this.$refs.info.getBoundingClientRect();this.position=-(n.left+window.pageXOffset)+"px"})},hideDetails(){this.$emit("hideDetails")},setImage(t){return t==="general"?"url('/src/assets/pics/card-regular.jpg')":"url('/src/assets/pics/card-sport.jpg')"},setDetailsImage(t){return t==="general"?"url('/src/assets/pics/card-regular-full.jpg')":"url('/src/assets/pics/card-sport-full.jpg')"},dateFormatter(t){return new Date(t).toLocaleString("ru")},setMarginBottom(t){this.marginBottom=t},resetMarginBottomWithDelay(){setTimeout(()=>{this.marginBottom="0"},300)}},computed:{colorSetter(){switch(this.theftCase.status){case"new":return"var(--red)";case"in_progress":return"var(--yellow)";default:return"var(--green)"}},addMargin(){return this.marginBottom},leftOffset(){return this.position}}},B=t=>(w("data-v-b08a87f3"),t=t(),D(),t),he={class:"theftCase__info-mini"},fe={class:"theftCase__info-mini"},ue=B(()=>e("span",{class:"theftCase__info"},[a("Owner: "),e("br")],-1)),me=B(()=>e("span",{class:"theftCase__info"},[a("Type: "),e("br")],-1));function Ce(t,n,s,S,_,o){const f=m("TheftCaseDetails");return l(),c("div",{ref:"info",class:"theftCase",style:C({color:o.colorSetter,marginBottom:o.addMargin,backgroundImage:o.setImage(s.theftCase.type)})},[e("ul",{onClick:n[0]||(n[0]=F(d=>o.toggleDetails(),["stop"]))},[e("li",he,i(o.dateFormatter(s.theftCase.createdAt)),1),e("li",fe,i(s.theftCase._id),1),e("li",null,[ue,a(" "+i(s.theftCase.ownerFullName),1)]),e("li",null,[me,a(" "+i(s.theftCase.type),1)])]),h(k,{name:"fade"},{default:x(()=>[T(h(f,{style:C({left:o.leftOffset,backgroundImage:o.setDetailsImage(s.theftCase.type)}),class:"theftCase__details",theftCase:s.theftCase,onHideDetails:o.hideDetails},null,8,["style","theftCase","onHideDetails"]),[[R,s.isActive]])]),_:1})],4)}const ge=y(de,[["render",Ce],["__scopeId","data-v-b08a87f3"]]),pe={components:{MainLink:O,MainMenu:j,TheftCase:ge,NavService:P},data(){return{textColor:"var(--red)",links:[{name:"Main",discription:"return to main page.",link:"/"},{name:"Reports",discription:"Page with all theft reports.",link:"/reports"}],activeCase:null}},methods:{toggleCase(t){this.activeCase=this.activeCase===t?null:t},hideCase(t){this.activeCase=null}},mounted(){this.theftStore.getAllCases(),this.officersStore.getAllOfficers(),console.log(this.cases)},computed:{theftStore(){return p()},officersStore(){return v()},...b(p,{cases:"cases"})}},M=t=>(w("data-v-b40a36a8"),t=t(),D(),t),ve={class:"content"},ye={class:"content__up"},we={class:"greet"},De=M(()=>e("span",null,"Reports",-1)),Se=M(()=>e("br",null,null,-1)),be={key:0,class:"content__down"},Te={key:1,class:"content__down-empty"};function xe(t,n,s,S,_,o){const f=m("NavService"),d=m("TheftCase"),N=m("MainMenu");return l(),c("div",ve,[e("div",ye,[h(f),e("div",we,[e("h1",{style:C({color:_.textColor})},[De,Se,a(" cases of theft")],4)])]),t.cases.length>0?(l(),c("div",be,[(l(!0),c(V,null,H(t.cases,u=>(l(),L(d,{key:u._id,theftCase:u,isActive:_.activeCase===u._id,onToggleDetails:I=>o.toggleCase(u._id),onHideDetails:I=>o.hideCase(u._id)},null,8,["theftCase","isActive","onToggleDetails","onHideDetails"]))),128))])):(l(),c("div",Te,"Phew, there are no cases in the reports.")),h(N,{textColor:_.textColor},null,8,["textColor"])])}const Me=y(pe,[["render",xe],["__scopeId","data-v-b40a36a8"]]);export{Me as default};
