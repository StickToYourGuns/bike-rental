import{_ as g,o as d,c,a as t,t as y,n,F as C,r as x,b as M,u as p,d as S,m as w,w as h,v as u,e as F,f as _,g as b,h as f,p as I,i as V,j as L,M as D,k as O,l as B,q as U}from"./index-2IeyWMcP.js";const R={props:{items:{type:Array},color:{type:String},modelValue:{type:String,default:""}},data(){return{isOpen:!1}},methods:{toggleDropdown(){this.isOpen=!this.isOpen},selectItem(r){this.$emit("update:modelValue",r),this.isOpen=!1,this.$emit("select-type",r)}}},P={class:"dropdown"},z={key:0,class:"dropdown-menu"},A=["onClick"];function J(r,o,a,v,e,l){return d(),c("div",P,[t("button",{style:n({color:this.modelValue?this.color?this.color:"white":"var(--red)"}),onClick:o[0]||(o[0]=(...i)=>l.toggleDropdown&&l.toggleDropdown(...i)),class:"dropdown-btn"},y(a.modelValue||"Выберите элемент"),5),e.isOpen?(d(),c("ul",z,[(d(!0),c(C,null,x(a.items,(i,s)=>(d(),c("li",{key:s,onClick:k=>l.selectItem(i)},y(i),9,A))),128))])):M("",!0)])}const j=g(R,[["render",J],["__scopeId","data-v-2897b59e"]]),q={components:{Dropdown:j},data(){return{theftForm:{ownerFullName:"",licenseNumber:"",type:"",color:"",date:"",description:""},dropdownItemsType:["","general","sport"],dropdownItemsColor:["","red","green","blue","yellow","orange","cyan","purple","white","grey"],color:"var(--red)",isSended:!1,error:null}},methods:{selectType(r){this.theftForm.type=r},selectColor(r){switch(this.theftForm.color=r,r){case"red":this.color="var(--red)";break;case"green":this.color="var(--green)";break;case"blue":this.color="var(--blue)";break;case"yellow":this.color="var(--yellow)";break;case"orange":this.color="var(--orange)";break;case"cyan":this.color="var(--cyan)";break;case"purple":this.color="var(--purple)";break;case"white":this.color="var(--white)";break;case"grey":this.color="var(--dark3)";break}this.$emit("select-color",this.color)},async sendReport(){this.isLogged?this.theftForm.licenseNumber&&this.theftForm.ownerFullName&&this.theftForm.type&&this.theftForm.color&&this.theftForm.date&&this.theftForm.description?(await this.theftStore.createCase({ownerFullName:this.theftForm.ownerFullName,licenseNumber:this.theftForm.licenseNumber,type:this.theftForm.type,color:this.theftForm.color,date:this.theftForm.date,officer:JSON.parse(localStorage.getItem("userInfo")).id,description:this.theftForm.description}),this.error||(this.isSended=!0,setTimeout(()=>{this.isSended=!1,this.theftForm.ownerFullName="",this.theftForm.licenseNumber="",this.theftForm.type="",this.theftForm.color="",this.theftForm.date="",this.theftForm.description=""},5e3))):(this.error="Заполните все поля",setTimeout(()=>{this.error=null},1e3)):this.theftForm.licenseNumber&&this.theftForm.ownerFullName&&this.theftForm.type&&this.theftForm.color&&this.theftForm.date&&this.theftForm.description?(await this.theftStore.createCasePublic({ownerFullName:this.theftForm.ownerFullName,licenseNumber:this.theftForm.licenseNumber,type:this.theftForm.type,color:this.theftForm.color,date:this.theftForm.date,clientId:JSON.parse(localStorage.getItem("clientID")).clientID,description:this.theftForm.description}),this.error||(this.isSended=!0,setTimeout(()=>{this.isSended=!1,this.theftForm.ownerFullName="",this.theftForm.licenseNumber="",this.theftForm.type="",this.theftForm.color="",this.theftForm.date="",this.theftForm.description=""},5e3))):(this.error="Заполните все поля",setTimeout(()=>{this.error=null},1e3))}},computed:{authStore(){return p()},theftStore(){return S()},...w(p,{isLogged:"isLogged"}),...w(S,{error:"error"}),visibleColor(){switch(this.color){case"var(--yellow)":return"black";case"var(--cyan)":return"black";case"white":return"black";default:return"white"}}}},m=r=>(I("data-v-c7fd2278"),r=r(),V(),r),E=m(()=>t("label",{for:"licenseNumber"},"Номер лицензии *",-1)),G=m(()=>t("label",{for:"ownerFullName"},"Имя владельца *",-1)),H=m(()=>t("label",{for:"type"},"Тип велосипеда *",-1)),K=m(()=>t("label",{for:"color"},"Цвет велосипеда *",-1)),Q=m(()=>t("label",{for:"date"},"Дата кражи *",-1)),W=m(()=>t("label",{for:"description"},"Дополнительная информация",-1)),X={class:"theft_form__buttom"},Y=m(()=>t("img",{src:L,alt:""},null,-1)),Z=[Y];function $(r,o,a,v,e,l){const i=f("Dropdown");return d(),c("form",{onSubmit:o[8]||(o[8]=_((...s)=>l.sendReport&&l.sendReport(...s),["prevent"])),class:"theft-form"},[t("div",{style:n({top:this.error?"-60px":"0"}),class:"theft-form-message_error"},y(e.error),5),E,h(t("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>e.theftForm.licenseNumber=s),name:"licenseNumber",id:"licenseNumber",type:"text",style:n({borderBottom:e.theftForm.licenseNumber?"none":"2px solid red"})},null,4),[[u,e.theftForm.licenseNumber]]),G,h(t("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>e.theftForm.ownerFullName=s),name:"ownerFullName",id:"ownerFullName",type:"text",style:n({borderBottom:e.theftForm.ownerFullName?"none":"2px solid red"})},null,4),[[u,e.theftForm.ownerFullName]]),H,F(i,{onClick:o[2]||(o[2]=_(()=>{},["prevent"])),modelValue:e.theftForm.type,"onUpdate:modelValue":o[3]||(o[3]=s=>e.theftForm.type=s),items:e.dropdownItemsType,id:"type"},null,8,["modelValue","items"]),K,F(i,{onClick:o[4]||(o[4]=_(()=>{},["prevent"])),modelValue:e.theftForm.color,"onUpdate:modelValue":o[5]||(o[5]=s=>e.theftForm.color=s),items:e.dropdownItemsColor,color:e.color,id:"color"},null,8,["modelValue","items","color"]),Q,h(t("input",{"onUpdate:modelValue":o[6]||(o[6]=s=>e.theftForm.date=s),name:"date",id:"date",type:"date",style:n({borderBottom:e.theftForm.date?"none":"2px solid red"})},null,4),[[u,e.theftForm.date]]),W,h(t("textarea",{"onUpdate:modelValue":o[7]||(o[7]=s=>e.theftForm.description=s),name:"description",id:"description"},`\r
\r
        `,512),[[u,e.theftForm.description]]),t("div",X,[t("div",{class:b(["theft_form__buttom-sended",{sended:e.isSended}]),style:n({backgroundColor:this.color,color:l.visibleColor})},null,6),t("div",{class:b(["theft_form__buttom-left",{sended:e.isSended}])},"Send report",2),t("button",{class:b(["theft_form__buttom-right",{sended:e.isSended}]),style:n({backgroundColor:this.color?this.color:"var(--red)"}),type:"submit"},Z,6)])],32)}const ee=g(q,[["render",$],["__scopeId","data-v-c7fd2278"]]),te={components:{TheftForm:ee,MainLink:D,MainMenu:O},data(){return{textColor:"var(--red)"}},methods:{selectColor(r){this.textColor=r}},computed:{authStore(){return p()},...w(p,{isLogged:"isLogged"}),links(){return[{name:"Main",discription:"return to main page.",link:"/",meta:!1},{name:"Reports",discription:"Page with all theft reports.",link:"/reports",meta:!this.isLogged},{name:"Officers",discription:"Page with all officers.",link:"/officers",meta:!this.isLogged}]}}},T=r=>(I("data-v-9778f310"),r=r(),V(),r),oe={class:"content"},re={class:"content__left"},se={class:"content__right"},le={class:"greet"},ie=T(()=>t("span",null,"Theft",-1)),ne=T(()=>t("br",null,null,-1));function de(r,o,a,v,e,l){const i=f("TheftForm"),s=f("MainLink"),k=f("MainMenu");return d(),c("div",oe,[t("div",re,[F(i,{onSelectColor:l.selectColor},null,8,["onSelectColor"])]),t("div",se,[t("div",le,[t("h1",{style:n({color:e.textColor})},[ie,ne,B(" report form")],4)]),t("nav",null,[(d(!0),c(C,null,x(l.links,N=>(d(),U(s,{key:N,link:N,color:e.textColor},null,8,["link","color"]))),128))])]),F(k,{textColor:e.textColor},null,8,["textColor"])])}const me=g(te,[["render",de],["__scopeId","data-v-9778f310"]]);export{me as default};
